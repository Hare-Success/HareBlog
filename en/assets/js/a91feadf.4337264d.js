"use strict";(self.webpackChunkHareBlog=self.webpackChunkHareBlog||[]).push([[8052],{1016:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>a});var s=o(2676),c=o(9313);const r={id:"dockerComposeRunSpringCloud",title:"DockerCompose\u90e8\u7f72\u5fae\u670d\u52a1",authors:"Hare",tags:["docker","springCloud","dockerCompose"]},l="DockerCompose\u90e8\u7f72\u670d\u52a1(\u4f4e\u7ea7)",i={id:"docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1/dockerComposeRunSpringCloud",title:"DockerCompose\u90e8\u7f72\u5fae\u670d\u52a1",description:"\u4e0a\u7bc7\u6587\u7ae0 Docker\u90e8\u7f72\u5fae\u670d\u52a1 \u8fd9\u79cd\u65b9\u5f0f\u975e\u5e38\u9ebb\u70e6\uff0c\u9879\u76ee\u4e00\u4e2a\u4e2apackage\u5728\u4e0a\u4f20\u670d\u52a1\u5668\u5728\u521b\u5efaDockerfile",source:"@site/docs/docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1/DockerCompose\u90e8\u7f72\u670d\u52a1(\u4f4e\u7ea7).md",sourceDirName:"docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1",slug:"/docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1/dockerComposeRunSpringCloud",permalink:"/en/docs/docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1/dockerComposeRunSpringCloud",draft:!1,unlisted:!1,tags:[{inline:!0,label:"docker",permalink:"/en/docs/tags/docker"},{inline:!0,label:"springCloud",permalink:"/en/docs/tags/spring-cloud"},{inline:!0,label:"dockerCompose",permalink:"/en/docs/tags/docker-compose"}],version:"current",lastUpdatedAt:1740401871e3,frontMatter:{id:"dockerComposeRunSpringCloud",title:"DockerCompose\u90e8\u7f72\u5fae\u670d\u52a1",authors:"Hare",tags:["docker","springCloud","dockerCompose"]},sidebar:"ContainersAndMiddleware",previous:{title:"Docker\u90e8\u7f72\u5fae\u670d\u52a1",permalink:"/en/docs/docker/Docker\u90e8\u7f72\u5fae\u670d\u52a1/dockerRunSpringCloud"},next:{title:"Redis",permalink:"/en/docs/category/redis"}},d={},a=[{value:"\u7b80\u6613\u4ecb\u7ecdDockerCompose",id:"\u7b80\u6613\u4ecb\u7ecddockercompose",level:2},{value:"DockerCompose\u5b89\u88c5(Linux)",id:"dockercompose\u5b89\u88c5linux",level:2},{value:"DockerCompose\u914d\u7f6e\u6587\u4ef6",id:"dockercompose\u914d\u7f6e\u6587\u4ef6",level:2},{value:"\u5f00\u59cb\u90e8\u7f72",id:"\u5f00\u59cb\u90e8\u7f72",level:2},{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:3},{value:"\u521b\u5efadocker-compose.yml\u914d\u7f6e\u6587\u4ef6",id:"\u521b\u5efadocker-composeyml\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u4e00\u4e9b\u95ee\u9898\u89e3\u51b3\u601d\u8def",id:"\u4e00\u4e9b\u95ee\u9898\u89e3\u51b3\u601d\u8def",level:3}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"dockercompose\u90e8\u7f72\u670d\u52a1\u4f4e\u7ea7",children:"DockerCompose\u90e8\u7f72\u670d\u52a1(\u4f4e\u7ea7)"}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["\u4e0a\u7bc7\u6587\u7ae0 ",(0,s.jsx)(n.a,{href:"/en/docs/docker/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1/dockerRunSpringCloud",children:"Docker\u90e8\u7f72\u5fae\u670d\u52a1"})," \u8fd9\u79cd\u65b9\u5f0f\u975e\u5e38\u9ebb\u70e6\uff0c\u9879\u76ee\u4e00\u4e2a\u4e2apackage\u5728\u4e0a\u4f20\u670d\u52a1\u5668\u5728\u521b\u5efaDockerfile\n\u6700\u540edocker build\u6784\u5efa\u955c\u50cf\uff0c\u4e00\u4e2a\u4e2adocker run\u542f\u52a8\u3002\u90a3\u6211\u4eec\u8fd9\u7bc7\u6587\u7ae0\u7b80\u5316\u4e00\u90e8\u5206\u5185\u5bb9\u3010\u4e0d\u7528\u5728\u4e00\u4e2a\u4e2a\u542f\u52a8\uff0c\u800c\u901a\u8fc7\u4e00\u4e2adocker-compose\u914d\u7f6e\u81ea\u542f\u6240\u6709\u5bb9\u5668\u3011"]}),(0,s.jsx)(n.p,{children:"\u9ad8\u624b\u8bf7\u8df3\u8fc7\uff0c\u5faa\u5faa\u6e10\u8fdb\u7684\u6587\u7ae0\u3002\u9ad8\u624b\u4eec\u76f4\u63a5\u8df3\u8fc7\u5427"})]}),"\n",(0,s.jsx)(n.h2,{id:"\u7b80\u6613\u4ecb\u7ecddockercompose",children:"\u7b80\u6613\u4ecb\u7ecdDockerCompose"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u76ee\u524dHare\u4e2a\u4eba\u80fd\u4e86\u6982\u7684: \u7c7b\u4f3c\u2018\u81ea\u52a8\u5316\u811a\u672c\u2019\uff0c\u4e00\u4e2a\u4e2a\u4e0b\u6765\u7f16\u6392\u955c\u50cf\u63a7\u5236\u7f51\u7edc\u3002\u8fbe\u5230\u4e00\u4e2a\u547d\u4ee4\u542f\u6240\u6709\u5bb9\u5668\u6548\u679c\u3002"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/compose/",children:"\u5b98\u65b9\u89e3\u91ca"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Docker Compose is a tool for defining and running multi-container applications. It is the key to unlocking a streamlined and efficient development and deployment experience.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["Compose simplifies the control of your entire application stack, making it easy to manage services, networks, and volumes in a single, comprehensible YAML configuration file. Then, with a single command, you create and start all the services from your configuration file.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["Compose works in all environments; production, staging, development, testing, as well as CI workflows. It also has commands for managing the whole lifecycle of your application:",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Start, stop, and rebuild services"}),"\n",(0,s.jsx)(n.li,{children:"View the status of running services"}),"\n",(0,s.jsx)(n.li,{children:"Stream the log output of running services"}),"\n",(0,s.jsx)(n.li,{children:"Run a one-off command on a service"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"dockercompose\u5b89\u88c5linux",children:"DockerCompose\u5b89\u88c5(Linux)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/compose/install/",children:"\u5b98\u7f51\u5730\u5740\uff0c\u4ee5\u5b98\u65b9\u547d\u4ee4\u4e3a\u4e3b"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4e0b\u8f7d\ncurl -SL https://github.com/docker/compose/releases/download/v2.29.6/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"#\u8d4b\u4e88\u6743\u9650\nchmod +x /usr/local/bin/docker-compose\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"#\u68c0\u67e5\ndocker-compose version\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"dockercompose\u914d\u7f6e\u6587\u4ef6",children:"DockerCompose\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/reference/compose-file/",children:"\u81ea\u5df1\u770b\u5b98\u7f51\u54c8"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5f00\u59cb\u90e8\u7f72",children:"\u5f00\u59cb\u90e8\u7f72"}),"\n",(0,s.jsx)(n.h3,{id:"\u51c6\u5907\u5de5\u4f5c",children:"\u51c6\u5907\u5de5\u4f5c"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nacos1.4.6 \u955c\u50cf"}),"\n",(0,s.jsx)(n.li,{children:"Mysql8.0.27 \u955c\u50cf"}),"\n",(0,s.jsxs)(n.li,{children:["\u4e24\u4e2a\u670d\u52a1(A\u63d0\u4f9b\u8005\u548cB\u6d88\u8d39\u8005-Feign) \u955c\u50cf","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5c06\u670d\u52a1package\u540e\uff0c\u4e0a\u4f20\u670d\u52a1\u5668\u3002\u5728\u4e00\u4e2a\u76ee\u5f55\u4e2d\u521b\u5efaDockerfile\u3002\u4ee5\u4e0b\u662fDockerfile\u5185\u5bb9"}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'  FROM openjdk:8u141-slim\n  VOLUME /tmp\n  ADD A.jar app.jar\n  ENTRYPOINT ["java","-jar","/app.jar"]\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u521b\u5efadocker-composeyml\u914d\u7f6e\u6587\u4ef6",children:"\u521b\u5efadocker-compose.yml\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title='docker-compose.yml \u914d\u7f6e\u5185\u5bb9'",children:'name: broad_docker\n services:\n  A:\n   image: broad_fegin:0.1\n   container_name: broad_fegin_compose\n   ports:\n    - "7780:7780"\n   networks:\n    - docker_net\n   depends_on:\n    - mysql\n    - nacos\n\n  B:\n   image: broad_children:0.1\n   container_name: broad_fegin_children_compose\n   ports:\n    - "7790:7790"\n   networks:\n    - docker_net\n   depends_on:\n    - mysql\n    - nacos\n\n  mysql:\n   image: mysql:8.0.27\n   environment:\n     MYSQL_ROOT_PASSWORD: \'123456\'\n   container_name: broad_mysql\n   command:\n    --default-authentication-plugin=mysql_native_password\n   ports:\n    - "3306:3306"\n   volumes:\n    - ./mysql/init/:/docker-entrypoint-initdb.d/\n    - /usr/local/dockerdata/mysql_8/log:/var/log/mysql\n    - /usr/local/dockerdata/mysql_8/data:/var/lib/mysql\n    - /usr/local/dockerdata/mysql_8/conf:/etc/mysql/conf.d\n   networks:\n    - docker_net\n\n  nacos:\n   image: nacos/nacos-server:v1.4.6\n   environment:\n    - MODE=standalone\n   container_name: broad_nacos\n   ports:\n    - "8848:8848"\n   volumes:\n    - /usr/local/dockerdata/nacos/bin:/home/nacos/bin\n    - /usr/local/dockerdata/nacos/logs:/home/nacos/logs\n    - /usr/local/dockerdata/nacos/conf:/home/nacos/conf\n    - /usr/local/dockerdata/nacos/data:/home/nacos/data\n   networks:\n    - docker_net\n   depends_on:\n    - mysql\n\n networks:\n    docker_net:\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u8f6c\u5316\u547d\u4ee4\u540e: docker run --name nacos  -p 8848:8848  --network docker_net -e MODE=standalone -v /usr/local/dockerdata/nacos/bin/bin:/home/nacos/bin -v /usr/local/dockerdata/nacos/logs/logs:/home/nacos/logs -v /usr/local/dockerdata/nacos/conf/conf:/home/nacos/conf -v /usr/local/dockerdata/nacos/data/data:/home/nacos/data -d nacos/nacos-server:v1.4.6\n\u662f\u4e0d\u662f\u4e00\u76ee\u4e86\u7136!!!!\u8fd9\u5757\u5927\u5bb6\u770b\u770b\u5b98\u7f51\u914d\u7f6e\u6587\u4ef6\uff0c\u6216\u8005\u7f51\u4e0a\u641c\uff01\u5f88\u591a\u7684 \u4e00\u773c\u5c31\u80fd\u770b\u660e\u767d~~~\n\u6700\u7ec8\u4f7f\u7528: docker-compose up -d \u542f\u52a8\u5c31\u597d\u4e86\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4e00\u4e9b\u95ee\u9898\u89e3\u51b3\u601d\u8def",children:"\u4e00\u4e9b\u95ee\u9898\u89e3\u51b3\u601d\u8def"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"nacos \u9700\u8981\u521d\u59cb\u5316sql\uff0c\u90a3\u8fd9\u4e9bsql\u5c31\u8981\u5728mysql\u670d\u52a1\u4e2d\u914d\u7f6e\u4e0a"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# sql\u6587\u4ef6\u5728init\u76ee\u5f55\u4e0b\uff0c\u7ed1\u5b9a\u5728mysql\u7684\u627e\u4e2a\u6587\u4ef6\u76ee\u5f55\u4e0b\u521d\u59cb\u5316/docker-entrypoint-initdb.d/\n./mysql/init/:/docker-entrypoint-initdb.d/\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u78b0\u5230 No DataSource set\u95ee\u9898\n\u8fd9\u4e2a\u95ee\u9898\u5c31\u662f\u56e0\u4e3amysql\u6ca1\u6709\u521d\u59cb\u5316nacos\u7684\u6570\u636e\u8868\uff0c\u6216\u8005\u5c31\u662fnacos\u91cc\u914d\u7f6e\u7684mysql\u8fde\u63a5\u4e0d\u5bf9\u5bfc\u81f4\uff0c\u5927\u5bb6\u53ef\u4ee5\u7740\u91cd\u770b\u770b\u8fd9\u4e24\u70b9\n",(0,s.jsx)(n.strong,{children:"Hare\u78b0\u5230\u8fd9\u95ee\u9898\u89e3\u51b3\u65b9\u6848: \u54ea\u54ea\u90fd\u914d\u7f6e\u7684\u6ca1\u95ee\u9898\uff0c\u6700\u540e\u770b\u5230\u6570\u636e\u5e93user\u8868\u6709\u4e24\u4e2aroot\u7528\u6237\uff0c\u4e00\u4e2a\u662f\u5f00\u653e\u6240\u6709\uff0c\u4e00\u4e2a\u662flocalhost\uff01\u5220\u9664\u6389localhost\u7684\u5c31\u53ef\u4ee5\u4e86"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u670d\u52a1\u7684bootstrap.yml\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u7684nacos\u5730\u5740\u662f: nacos\uff08dockercompose.yml\u4e2d\u670d\u52a1\u540d\u79f0\uff09:8848\u3002\u4e00\u76f4\u6ce8\u518c\u4e0d\u4e0a\u53bb\uff01\n\u8fd9\u4e2a\u5c31\u627e\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u95ee\u9898\u5427\uff0c\u5982\u679cnacos\u6b63\u5e38\u542f\u52a8 \u6b63\u5e38\u8bbf\u95ee\u3002\u5927\u6982\u7387\u5c31\u662f\u670d\u52a1\u914d\u7f6e\u7684nacos\u914d\u7f6e\u4e0d\u662f\u6b63\u786e\u7684"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"depends_on \u914d\u7f6e\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u542f\u52a8\u987a\u5e8f\uff0c\u81ea\u5df1\u7814\u7a76\u7814\u7a76\u5427\uff01Hare\u6ca1\u6709\u7814\u7a76"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"\u4e00\u4e2a\u7b80\u5355\u7684\u4f7f\u7528docker-compose\u90e8\u7f72\u5c31ok\u4e86\uff0c\u5176\u4e2d\u4e00\u4e9b\u914d\u7f6e\u4ec0\u4e48\u6309\u81ea\u5df1\u9700\u8981\u81ea\u5df1\u52a0\u5c31\u53ef\u4ee5\u4e86"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8bf7\u5173\u6ce8\u540e\u7eed: Maven\u6784\u5efa\u955c\u50cf+docker-compose+GitHub-Action\u81ea\u52a8\u6784\u5efa\u90e8\u7f72\u5fae\u670d\u52a1\u9879\u76ee"})})]})]})}function m(e={}){const{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},9313:(e,n,o)=>{o.d(n,{Z:()=>i,a:()=>l});var s=o(5271);const c={},r=s.createContext(c);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);